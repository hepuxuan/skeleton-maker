{"version":3,"sources":["evalDOM.js","index.js"],"names":["module","exports","evalDOM","ELEMENTS","blocks","win_w","window","innerWidth","win_h","innerHeight","agrs","arguments","length","agrs0","getArgtype","parseAgrs","classProps","position","zIndex","background","drawBlock","width","height","top","left","radius","subClas","styles","push","join","wPercent","x","parseFloat","toFixed","hPercent","noop","arg","Object","prototype","toString","call","toLowerCase","match","getStyle","node","attr","nodeType","getComputedStyle","getRootNode","el","document","querySelector","includeElement","elements","indexOf","tagName","isHideStyle","hidden","isCustomCardBlock","bgStyle","bdReg","hasBgColor","test","hasNoBorder","some","item","getRect","w","h","customCardBlock","calcTextWidth","text","fontSize","fontWeight","div","createElement","innerHTML","style","cssText","body","appendChild","removeChild","parseInt","getBoundingClientRect","t","l","getPadding","paddingTop","paddingLeft","paddingBottom","paddingRight","createCommonClass","props","inlineStyle","prop","params","forEach","agr","sep","slice","split","appName","name","type","val","eval","JSON","parse","DrawPageframe","opts","rootNode","offsetTop","init","originStyle","animation","resetDOM","scrollTop","scrollY","bodyOverflow","scrollTo","withHeader","inHeader","header","hHeight","hBackground","showBlocks","blocksHTML","overflow","startDraw","$this","deepFindNode","nodes","i","childNodes","hasChildText","backgroundHasurl","j","textContent","trim","Promise","resolve","reject","setTimeout","html","e","copyToClipboard","str","value","select","execCommand","then","skeletonHTML","console","log","alert","catch","error"],"mappings":";AA+WA,SAAA,eAAA,EAAA,GAAA,OAAA,gBAAA,IAAA,sBAAA,EAAA,IAAA,mBAAA,SAAA,mBAAA,MAAA,IAAA,UAAA,wDAAA,SAAA,sBAAA,EAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,CAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,gBAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,SAAA,QAAA,GAAA,OAAA,QAAA,mBAAA,QAAA,iBAAA,OAAA,SAAA,SAAA,GAAA,cAAA,GAAA,SAAA,GAAA,OAAA,GAAA,mBAAA,QAAA,EAAA,cAAA,QAAA,IAAA,OAAA,UAAA,gBAAA,IAAA,GAAA,SAAA,mBAAA,GAAA,OAAA,mBAAA,IAAA,iBAAA,IAAA,qBAAA,SAAA,qBAAA,MAAA,IAAA,UAAA,mDAAA,SAAA,iBAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,mBAAA,GAAA,GAAA,MAAA,QAAA,GAAA,CAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,EAAA,QAAA,EAAA,EAAA,OAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GA/WAA,OAAOC,QAAU,SAASC,UAClBC,IAAAA,SAAW,CACf,QACA,SACA,SACA,OACA,MACA,QACA,MACA,MACA,WACA,QACA,OAEIC,OAAS,GACTC,MAAQC,OAAOC,WACfC,MAAQF,OAAOG,YAEjBC,KAAOC,UACND,KAAKE,SAAQF,KAAO,CAAEE,OAAQ,EAAM,EAAA,KACrCC,IAAAA,MAAQH,KAAK,GAEG,IAAhBA,KAAKE,QAAsC,WAAtBE,WAAWD,SAClCH,KAAOK,UAAcL,mBAAAA,QAGjBM,IAAAA,WAAa,CACjBC,SAAU,QACVC,OAAQ,IACRC,WAAY,WAQLC,SAAAA,YASL,IAAA,EAAA,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GARFC,EAAAA,EAAAA,MACAC,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,IACAC,EAAAA,EAAAA,KACAN,EAAAA,EAAAA,OAAAA,OAAS,IAAA,EAAA,IAIH,EAHNC,EAAAA,EAAAA,WAAAA,OAAaT,IAAAA,EAAAA,KAAKS,WAGZ,EAFNM,EAAAA,EAAAA,OACAC,EAAAA,EAAAA,QAEMC,EAAS,CAAC,UAAYL,EAAS,KAEhCI,GACHC,EAAOC,KACL,OAASL,EAAM,IACf,QAAUC,EAAO,IACjB,SAAWH,EAAQ,KAInBL,WAAWE,SAAWA,GACxBS,EAAOC,KAAK,WAAaV,GAGvBF,WAAWG,aAAeA,GAC5BQ,EAAOC,KAAK,cAAgBT,GAG9BM,GAAoB,OAAVA,GAAmBE,EAAOC,KAAK,iBAAmBH,GAC5DrB,OAAOwB,KACWF,gBAAAA,OAAAA,EAAU,MAAQ,GAAcC,aAAAA,OAAAA,EAAOE,KAAK,KAD9D,aAKOC,SAAAA,SAASC,GACTC,OAAAA,WAAYD,EAAI1B,MAAS,KAAK4B,QAAQ,GAGtCC,SAAAA,SAASH,GACTC,OAAAA,WAAYD,EAAIvB,MAAS,KAAKyB,QAAQ,GAGtCE,SAAAA,QAEArB,SAAAA,WAAWsB,GACXC,OAAAA,OAAOC,UAAUC,SACrBC,KAAKJ,GACLK,cACAC,MAAM,WAAW,GAGbC,SAAAA,SAASC,EAAMC,GACf,OAAmB,IAAlBD,EAAKE,SAAiBC,iBAAiBH,GAAMC,GAAQ,KAAO,GAG7DG,SAAAA,YAAYC,GACf,OAACA,EACgB,WAAd,QAAOA,GACVA,EACmB,WAAnBnC,WAAWmC,GACXC,SAASC,cAAcF,GACvB,KALYA,EAQTG,SAAAA,eAAeC,EAAUT,GACzB,OAACS,EAASC,SAASV,EAAKW,SAAW,IAAId,eAGvCe,SAAAA,YAAYZ,GAEjBD,MAA8B,SAA9BA,SAASC,EAAM,YACkB,WAAjCD,SAASC,EAAM,eACc,GAA7BD,SAASC,EAAM,YACfA,EAAKa,OAIAC,SAAAA,kBAAkBd,GACnBe,IAAAA,EAAUhB,SAASC,EAAM,cAEzBgB,EAAQ,eACRC,GAFa,sBAGLC,KAAKH,KAAaA,EAAQL,QAAQ,YAC1CS,EAAc,CAAC,MAAO,OAAQ,QAAS,UAAUC,KAAK,SAAAC,GACnDL,OAAAA,EAAME,KAAKnB,SAASC,EAAM,UAAYqB,MAE9BC,EAAAA,QAAQtB,GAAjBuB,EAAAA,EAAAA,EAAGC,EAAAA,EAAAA,EASJC,SAPLR,KACEE,GAA+C,QAAhCpB,SAASC,EAAM,gBAChCuB,EAAI,GACJC,EAAI,GACJD,EAAI,IAAO9D,OACX+D,EAAI,GAAM5D,OAKL8D,SAAAA,cAAcC,GAAiC,IAAA,EAAA,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GAAzBC,EAAAA,EAAAA,SAAUC,EAAAA,EAAAA,WACnC,IAACF,EAAM,OAAO,EAEZG,IAAAA,EAAMxB,SAASyB,cAAc,OACnCD,EAAIE,UAAYL,EAChBG,EAAIG,MAAMC,QAAU,CAClB,oBACA,gBACUN,UAAAA,OAAAA,GACGA,aAAAA,OAAAA,GACEC,eAAAA,OAAAA,GACf,aACA5C,KAAK,KACPqB,SAAS6B,KAAKC,YAAYN,GACpBP,IAAAA,EAAIxB,SAAS+B,EAAK,SAClBN,EAAIzB,SAAS+B,EAAK,UAEjB,OADPxB,SAAS6B,KAAKE,YAAYP,GACnB,CACLP,EAAGe,SAASf,GACZC,EAAGc,SAASd,IAIPF,SAAAA,QAAQtB,GACX,IAACA,EAAM,MAAO,GAMdA,IAAAA,EAAAA,EAAKuC,wBACF,MAAA,CAAEC,EALP7D,EAAAA,IAKU8D,EAJV7D,EAAAA,KAIa2C,EAHb9C,EAAAA,MAGgB+C,EAFhB9C,EAAAA,QAKKgE,SAAAA,WAAW1C,GACX,MAAA,CACL2C,WAAYL,SAASvC,SAASC,EAAM,eACpC4C,YAAaN,SAASvC,SAASC,EAAM,gBACrC6C,cAAeP,SAASvC,SAASC,EAAM,kBACvC8C,aAAcR,SAASvC,SAASC,EAAM,kBAIjC+C,SAAAA,kBAAkBC,GACnBC,IAAAA,EAAc,CAAC,cAChB,IAAA,IAAIC,KAAQF,EACfC,EAAYjE,KACPkE,GAAAA,OAAS,WAATA,EAAoB,UAAYA,EAAQF,KAAAA,OAAAA,EAAME,GADnD,MAIFD,EAAYjE,KAAK,4CACjBxB,OAAOwB,KAAKiE,EAAYhE,KAAK,KAGtBd,SAAAA,YAAUL,IAAAA,KAAO,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,GACpBqF,OAAS,GAYNA,OAXPrF,KAAKsF,QAAQ,SAAAC,KACLC,IAAAA,IAAMD,IAAI3C,QAAQ,KACM2C,iBAAAA,IAAIE,MAAM,EAAGD,KAAKE,MAAM,KAFpC,kBAAA,eAAA,iBAAA,GAEXC,QAFW,kBAAA,GAEFC,KAFE,kBAAA,GAEIC,KAFJ,kBAAA,GAGZC,IAAMP,IAAIE,MAAMD,IAAM,GAC5BH,OAAOO,MACI,aAATC,KACIE,KAAK,IAAMD,IAAM,KACR,WAATD,KACAG,KAAKC,MAAMH,KACXA,MAEDT,OAGAa,SAAAA,cAAcC,GAOd,OANFC,KAAAA,SAAW9D,YAAY6D,EAAKC,WAAa5D,SAAS6B,KAClDgC,KAAAA,UAAYF,EAAKE,WAAa,EAC9B3D,KAAAA,eAAiByD,EAAKzD,eACtB4D,KAAAA,KAAOH,EAAKG,KACZC,KAAAA,YAAc,GAEZ,gBAAgBL,cAAgB,KAAO,IAAIA,cAAcC,GAyI3D,OA9THnG,KAAKwG,YACPlG,WAAWkG,UAAYxG,KAAKwG,WAG9BvB,kBAAkB3E,YAoLlB4F,cAActE,UAAY,CACxB6E,SAAU,WACHH,KAAAA,MAAQ,KAAKA,OACbC,KAAAA,YAAc,CACjBG,UAAW9G,OAAO+G,QAClBC,aAAc3E,SAASO,SAAS6B,KAAM,aAExCzE,OAAOiH,SAAS,EAAG,KAAKR,WACxB7D,SAAS6B,KAAKF,MAAMC,SAAW,6BAC/B1D,UAAU,CACRE,OAAQ,IACRJ,OAAQ,IACRC,WAAY,OACZO,SAAS,IAEN8F,KAAAA,cAEPC,SAAU,SAAS7E,GACblC,GAAAA,KAAKgH,OAAQ,CACTpG,IAAAA,EAAS4D,SAASxE,KAAKgH,OAAOpG,QAChCA,GAAAA,EAAQ,CACa4C,IAAAA,EAAAA,QAAQtB,GAAvBwC,EAAAA,EAAAA,EAAGC,EAAAA,EAAGlB,EAAAA,EAAGC,EAAAA,EACVgB,OAAAA,GAAK9D,KAIlBkG,WAAY,WACN9G,GAAAA,KAAKgH,OAAQ,CACgBhH,IAAAA,EAAAA,KAAKgH,OAA5BpG,EAAAA,EAAAA,OAAQH,EAAAA,EAAAA,WACVwG,EAAUzC,SAAS5D,GACnBsG,EAAczG,GAAcT,KAAKS,WACnCwG,GACFvG,UAAU,CACRE,OAAQY,SAASyF,GACjBzG,OAAQ,IACRC,WAAYyG,EACZlG,SAAS,MAKjBmG,WAAY,WACNzH,GAAAA,OAAOQ,OAAQ,CACAsC,IAAT6B,EAAS7B,SAAT6B,KACF+C,EAAa1H,OAAOyB,KAAK,IACzB6C,EAAMxB,SAASyB,cAAc,OAO5BmD,OANPpD,EAAIE,UAAYkD,EAChB/C,EAAKC,YAAYN,GAEjBpE,OAAOiH,SAAS,EAAG,KAAKN,YAAYG,WACpClE,SAAS6B,KAAKF,MAAMkD,SAAW,KAAKd,YAAYK,aAEzCQ,IAIXE,UAAW,WACHC,IAAAA,EAAQ,KAyEP,OAxEFd,KAAAA,WAGIe,SAAAA,EAAaC,GAChBA,GAAAA,EAAMvH,OACH,IAAA,IAAIwH,EAAI,EAAGA,EAAID,EAAMvH,OAAQwH,IAAK,CACjCxF,IAAAA,EAAOuF,EAAMC,GAEf5E,KAAAA,YAAYZ,IAC0B,aAArC9B,WAAWmH,EAAM7E,iBACyB,GAAzC6E,EAAM7E,eAAeR,EAAMxB,YAF7BoC,CAKE6E,IAAAA,EAAazF,EAAKyF,WAClBC,GAAe,EAEfC,EADa5F,SAASC,EAAM,mBACEF,MAAM,cAExC6F,EAAmBA,GAAoBA,EAAiB3H,OAEnD,IAAA,IAAI4H,EAAI,EAAGA,EAAIH,EAAWzH,OAAQ4H,IAEnCH,GAA2B,IAA3BA,EAAWG,GAAG1F,UACduF,EAAWG,GAAGC,YAAYC,OAAO9H,OACjC,CACA0H,GAAe,EACf,MAKF,IAAClF,eAAejD,SAAUyC,IACxB2F,GACmB,IAAlB3F,EAAKE,UAAkBF,EAAK6F,YAAYC,OAAO9H,QAChD0H,GACA5E,kBAAkBd,MACnBqF,EAAMR,SAAS7E,GAChB,CACuBsB,IAAAA,EAAAA,QAAQtB,GAAvBwC,EAAAA,EAAAA,EAAGC,EAAAA,EAAAA,EAAGlB,EAAAA,EAAAA,EAAGC,EAAAA,EAAAA,EAGfD,GAAAA,EAAI,GACJC,EAAI,GACJiB,GAAK,GACLA,EAAIhF,OACJ+E,EAAI5E,MAAQ,KACZ4E,GAAK,EACL,CAMIE,IAAAA,EAAAA,WAAW1C,GAJb2C,EAAAA,EAAAA,WACAC,EAAAA,EAAAA,YACAC,EAAAA,EAAAA,cAGFrE,UAAU,CACRC,MAAOS,SAASqC,EAAIqB,EAHpBE,EAAAA,cAIApE,OAAQY,SAASkC,EAAImB,EAAaE,GAClClE,IAAKW,SAASkD,EAAIG,GAClB/D,KAAMM,SAASuD,EAAIG,GACnB/D,OAAQkB,SAASC,EAAM,yBAGlByF,GAAcA,EAAWzH,SAC7B0H,GACHJ,EAAaG,MAOvBH,CAtEc,KAAKpB,SAASuB,YAuErB,KAAKR,eAIT,IAAIc,QAAQ,SAACC,EAASC,GAC3BC,WAAW,WACL,IACIC,IAAAA,EAAO,IAAInC,cAAc,CAC7BI,KAAMtG,KAAKsG,KACXF,SAAUpG,KAAKoG,SACf1D,eAAgB1C,KAAK0C,iBACpB4E,YACHY,EAAQG,GACR,MAAOC,GACPH,EAAOG,KAER;;AC9VP,aAXA,IAAA,EAAA,EAAA,QAAA,cAWA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GATA,IAAMC,EAAkB,SAAAC,GAChBjG,IAAAA,EAAKC,SAASyB,cAAc,YAClC1B,EAAGkG,MAAQD,EACXhG,SAAS6B,KAAKC,YAAY/B,GAC1BA,EAAGmG,SACHlG,SAASmG,YAAY,QACrBnG,SAAS6B,KAAKE,YAAYhC,KAG5B,EAAmB,EAAA,SAAA,CACjB9B,WAAY,UACZ+F,UAAW,gCAEVoC,KAAK,SAAAC,GACJC,QAAQC,IAAIF,GACZN,EAAgBM,GAChBG,MAAM,yBAEPC,MAAM,SAAAX,GACLQ,QAAQI,MAAMZ","file":"index.js","sourceRoot":"../src","sourcesContent":["module.exports = function evalDOM() {\n  const ELEMENTS = [\n    \"audio\",\n    \"button\",\n    \"canvas\",\n    \"code\",\n    \"img\",\n    \"input\",\n    \"pre\",\n    \"svg\",\n    \"textarea\",\n    \"video\",\n    \"xmp\"\n  ];\n  const blocks = [];\n  const win_w = window.innerWidth;\n  const win_h = window.innerHeight;\n\n  let agrs = arguments;\n  if (!agrs.length) agrs = { length: 1, 0: {} };\n  let agrs0 = agrs[0];\n\n  if (agrs.length !== 1 || getArgtype(agrs0) !== \"object\") {\n    agrs = parseAgrs([...agrs]);\n  }\n\n  const classProps = {\n    position: \"fixed\",\n    zIndex: 999,\n    background: \"#f2f2f2\"\n  };\n  if (agrs.animation) {\n    classProps.animation = agrs.animation;\n  }\n\n  createCommonClass(classProps);\n\n  function drawBlock({\n    width,\n    height,\n    top,\n    left,\n    zIndex = 999,\n    background = agrs.background,\n    radius,\n    subClas\n  } = {}) {\n    const styles = [\"height:\" + height + \"%\"];\n\n    if (!subClas) {\n      styles.push(\n        \"top:\" + top + \"%\",\n        \"left:\" + left + \"%\",\n        \"width:\" + width + \"%\"\n      );\n    }\n\n    if (classProps.zIndex !== zIndex) {\n      styles.push(\"z-index:\" + zIndex);\n    }\n\n    if (classProps.background !== background) {\n      styles.push(\"background:\" + background);\n    }\n\n    radius && radius != \"0px\" && styles.push(\"border-radius:\" + radius);\n    blocks.push(\n      `<div class=\"_${subClas ? \" __\" : \"\"}\" style=\"${styles.join(\";\")}\"></div>`\n    );\n  }\n\n  function wPercent(x) {\n    return parseFloat((x / win_w) * 100).toFixed(3);\n  }\n\n  function hPercent(x) {\n    return parseFloat((x / win_h) * 100).toFixed(3);\n  }\n\n  function noop() {}\n\n  function getArgtype(arg) {\n    return Object.prototype.toString\n      .call(arg)\n      .toLowerCase()\n      .match(/\\s(\\w+)/)[1];\n  }\n\n  function getStyle(node, attr) {\n    return (node.nodeType === 1 ? getComputedStyle(node)[attr] : \"\") || \"\";\n  }\n\n  function getRootNode(el) {\n    if (!el) return el;\n    return typeof el === \"object\"\n      ? el\n      : getArgtype(el) === \"string\"\n      ? document.querySelector(el)\n      : null;\n  }\n\n  function includeElement(elements, node) {\n    return ~elements.indexOf((node.tagName || \"\").toLowerCase());\n  }\n\n  function isHideStyle(node) {\n    return (\n      getStyle(node, \"display\") === \"none\" ||\n      getStyle(node, \"visibility\") === \"hidden\" ||\n      getStyle(node, \"opacity\") == 0 ||\n      node.hidden\n    );\n  }\n\n  function isCustomCardBlock(node) {\n    const bgStyle = getStyle(node, \"background\");\n    const bgColorReg = /rgba\\([\\s\\S]+?0\\)/gi;\n    const bdReg = /(0px)|(none)/;\n    const hasBgColor =\n      !bgColorReg.test(bgStyle) || ~bgStyle.indexOf(\"gradient\");\n    const hasNoBorder = [\"top\", \"left\", \"right\", \"bottom\"].some(item => {\n      return bdReg.test(getStyle(node, \"border-\" + item));\n    });\n    const { w, h } = getRect(node);\n    const customCardBlock = !!(\n      hasBgColor &&\n      (!hasNoBorder || getStyle(node, \"box-shadow\") != \"none\") &&\n      w > 0 &&\n      h > 0 &&\n      w < 0.95 * win_w &&\n      h < 0.3 * win_h\n    );\n    return customCardBlock;\n  }\n\n  function calcTextWidth(text, { fontSize, fontWeight } = {}) {\n    if (!text) return 0;\n\n    const div = document.createElement(\"div\");\n    div.innerHTML = text;\n    div.style.cssText = [\n      \"position:absolute\",\n      \"left:-99999px\",\n      `height:${fontSize}`,\n      `font-size:${fontSize}`,\n      `font-weight:${fontWeight}`,\n      \"opacity:0\"\n    ].join(\";\");\n    document.body.appendChild(div);\n    const w = getStyle(div, \"width\");\n    const h = getStyle(div, \"height\");\n    document.body.removeChild(div);\n    return {\n      w: parseInt(w),\n      h: parseInt(h)\n    };\n  }\n\n  function getRect(node) {\n    if (!node) return {};\n    const {\n      top: t,\n      left: l,\n      width: w,\n      height: h\n    } = node.getBoundingClientRect();\n    return { t, l, w, h };\n  }\n\n  function getPadding(node) {\n    return {\n      paddingTop: parseInt(getStyle(node, \"paddingTop\")),\n      paddingLeft: parseInt(getStyle(node, \"paddingLeft\")),\n      paddingBottom: parseInt(getStyle(node, \"paddingBottom\")),\n      paddingRight: parseInt(getStyle(node, \"paddingRight\"))\n    };\n  }\n\n  function createCommonClass(props) {\n    const inlineStyle = [\"<style>._{\"];\n    for (let prop in props) {\n      inlineStyle.push(\n        `${prop === \"zIndex\" ? \"z-index\" : prop}:${props[prop]};`\n      );\n    }\n    inlineStyle.push(\"}.__{top:0%;left:0%;width:100%;}</style>\");\n    blocks.push(inlineStyle.join(\"\"));\n  }\n\n  function parseAgrs(agrs = []) {\n    let params = {};\n    agrs.forEach(agr => {\n      const sep = agr.indexOf(\":\");\n      const [appName, name, type] = agr.slice(0, sep).split(\"-\");\n      const val = agr.slice(sep + 1);\n      params[name] =\n        type === \"function\"\n          ? eval(\"(\" + val + \")\")\n          : type === \"object\"\n          ? JSON.parse(val)\n          : val;\n    });\n    return params;\n  }\n\n  function DrawPageframe(opts) {\n    this.rootNode = getRootNode(opts.rootNode) || document.body;\n    this.offsetTop = opts.offsetTop || 0;\n    this.includeElement = opts.includeElement;\n    this.init = opts.init;\n    this.originStyle = {};\n\n    return this instanceof DrawPageframe ? this : new DrawPageframe(opts);\n  }\n\n  DrawPageframe.prototype = {\n    resetDOM: function() {\n      this.init && this.init();\n      this.originStyle = {\n        scrollTop: window.scrollY,\n        bodyOverflow: getStyle(document.body, \"overflow\")\n      };\n      window.scrollTo(0, this.offsetTop);\n      document.body.style.cssText += \"overflow:hidden!important;\";\n      drawBlock({\n        height: 100,\n        zIndex: 990,\n        background: \"#fff\",\n        subClas: true\n      });\n      this.withHeader();\n    },\n    inHeader: function(node) {\n      if (agrs.header) {\n        const height = parseInt(agrs.header.height);\n        if (height) {\n          const { t, l, w, h } = getRect(node);\n          return t <= height;\n        }\n      }\n    },\n    withHeader: function() {\n      if (agrs.header) {\n        const { height, background } = agrs.header;\n        const hHeight = parseInt(height);\n        const hBackground = background || agrs.background;\n        if (hHeight) {\n          drawBlock({\n            height: hPercent(hHeight),\n            zIndex: 999,\n            background: hBackground,\n            subClas: true\n          });\n        }\n      }\n    },\n    showBlocks: function() {\n      if (blocks.length) {\n        const { body } = document;\n        const blocksHTML = blocks.join(\"\");\n        const div = document.createElement(\"div\");\n        div.innerHTML = blocksHTML;\n        body.appendChild(div);\n\n        window.scrollTo(0, this.originStyle.scrollTop);\n        document.body.style.overflow = this.originStyle.bodyOverflow;\n\n        return blocksHTML;\n      }\n    },\n\n    startDraw: function() {\n      const $this = this;\n      this.resetDOM();\n      const nodes = this.rootNode.childNodes;\n\n      function deepFindNode(nodes) {\n        if (nodes.length) {\n          for (let i = 0; i < nodes.length; i++) {\n            let node = nodes[i];\n            if (\n              isHideStyle(node) ||\n              (getArgtype($this.includeElement) === \"function\" &&\n                $this.includeElement(node, drawBlock) == false)\n            )\n              continue;\n            let childNodes = node.childNodes;\n            let hasChildText = false;\n            let background = getStyle(node, \"backgroundImage\");\n            let backgroundHasurl = background.match(/url\\(.+?\\)/);\n\n            backgroundHasurl = backgroundHasurl && backgroundHasurl.length;\n\n            for (let j = 0; j < childNodes.length; j++) {\n              if (\n                childNodes[j].nodeType === 3 &&\n                childNodes[j].textContent.trim().length\n              ) {\n                hasChildText = true;\n                break;\n              }\n            }\n\n            if (\n              (includeElement(ELEMENTS, node) ||\n                backgroundHasurl ||\n                (node.nodeType === 3 && node.textContent.trim().length) ||\n                hasChildText ||\n                isCustomCardBlock(node)) &&\n              !$this.inHeader(node)\n            ) {\n              const { t, l, w, h } = getRect(node);\n\n              if (\n                w > 0 &&\n                h > 0 &&\n                l >= 0 &&\n                l < win_w &&\n                t < win_h - 100 &&\n                t >= 0\n              ) {\n                const {\n                  paddingTop,\n                  paddingLeft,\n                  paddingBottom,\n                  paddingRight\n                } = getPadding(node);\n                drawBlock({\n                  width: wPercent(w - paddingLeft - paddingRight),\n                  height: hPercent(h - paddingTop - paddingBottom),\n                  top: hPercent(t + paddingTop),\n                  left: wPercent(l + paddingLeft),\n                  radius: getStyle(node, \"border-radius\")\n                });\n              }\n            } else if (childNodes && childNodes.length) {\n              if (!hasChildText) {\n                deepFindNode(childNodes);\n              }\n            }\n          }\n        }\n      }\n\n      deepFindNode(nodes);\n      return this.showBlocks();\n    }\n  };\n\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      try {\n        const html = new DrawPageframe({\n          init: agrs.init,\n          rootNode: agrs.rootNode,\n          includeElement: agrs.includeElement\n        }).startDraw();\n        resolve(html);\n      } catch (e) {\n        reject(e);\n      }\n    }, 1000);\n  });\n};\n\n// 待优化：\n// 1. table\n// 2. 文字\n","import createSkeletonHTML from \"./evalDOM\";\n\nconst copyToClipboard = str => {\n  const el = document.createElement(\"textarea\");\n  el.value = str;\n  document.body.appendChild(el);\n  el.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(el);\n};\n\ncreateSkeletonHTML({\n  background: \"#f2f2f2\",\n  animation: \"opacity 1s linear infinite;\"\n})\n  .then(skeletonHTML => {\n    console.log(skeletonHTML);\n    copyToClipboard(skeletonHTML);\n    alert(\"copied to clipboard\");\n  })\n  .catch(e => {\n    console.error(e);\n  });\n"]}